<?php

/**
 * @file
 * Allow content to be edited in structured and reusable chunks.
 */

/**
 * Load all chunk types defined by hook_chunk_types().
 */
function chunk_types_load() {
  $modules = module_implements('chunk_types');
  $chunk_types = array();
  foreach ($modules as $module) {
    $function = $module . '_chunk_types';
    $module_chunk_types = $function();
    foreach ($module_chunk_types as $name) {
      // @TODO: Add a check here to see if a chunk type of the same name already
      // exists. If so, we should log it in watchdog.
      $chunk_types[$name] = new ChunkType($name, $module);
    }
  }
  return $chunk_types;
}

/**
 * Load the configuration form for a given chunk type.
 */
function chunk_type_get_form($chunk_type) {
  return $chunk_type->getForm();
}

